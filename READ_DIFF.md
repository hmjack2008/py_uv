# 国际象棋游戏版本差异对比

## 架构差异

### 桌面版本 (main.py)
- 使用 Pygame 作为图形界面
- 单机运行，不需要网络连接
- 所有代码在本地执行
- 直接鼠标操作响应

### 网页版本 (web_main.py)
- 使用 FastAPI 作为后端服务器
- 需要网络连接，基于 WebSocket 通信
- 前后端分离架构
- 浏览器中运行界面

## 文件结构对比

### 桌面版本文件结构
```
py_uv_p2/
├── main.py         # 主程序入口
├── chess_board.py  # 棋盘逻辑类
├── chess_ui.py     # Pygame界面类
```

### 网页版本文件结构
```
py_uv_p2/
├── web_main.py     # FastAPI后端服务
├── chess_board.py  # 棋盘逻辑类（共用）
├── templates/      # 前端模板
│   └── chess.html  # 游戏界面HTML
└── static/         # 静态资源
    └── css/
        └── chess.css    # 样式文件
```

## 功能实现差异

### 1. 界面渲染方式
桌面版：
- 使用 Pygame 绘制界面
- 直接渲染图形和文字
- 固定窗口大小
- 本地资源加载

网页版：
- 使用 HTML/CSS 构建界面
- DOM元素操作
- 响应式设计
- 浏览器渲染

### 2. 事件处理
桌面版：
- Pygame 事件循环
- 直接处理鼠标事件
- 同步处理

网页版：
- WebSocket 事件处理
- DOM事件监听
- 异步通信处理

### 3. 计时器实现
桌面版：
- Pygame clock 控制
- 本地时间计算
- 直接更新显示

网页版：
- JavaScript setInterval
- 客户端时间计算
- DOM更新显示

### 4. 多人游戏支持
桌面版：
- 单机双人对战
- 同一台电脑操作
- 不支持网络对战

网页版：
- 支持在线对战
- 可跨设备操作
- 支持多个游戏会话

### 5. 数据存储
桌面版：
- 内存中维护游戏状态
- 单一游戏实例

网页版：
- 服务器维护多个游戏状态
- 支持多个并发游戏会话
- 使用字典存储游戏状态

### 6. 共同特性
两个版本都保持了：
- 相同的棋盘逻辑（chess_board.py）
- 相同的游戏规则
- 相似的视觉效果
- 计时功能
- 胜负判定

### 7. 依赖要求
桌面版：
- Python 3.12
- Pygame 2.6.1

网页版：
- Python 3.12
- FastAPI 0.104.1
- Uvicorn 0.24.0
- WebSockets 12.0
- Jinja2 3.1.2

## 主要改动简述

1. 核心架构改动：
   - 从 Pygame 单机版改为 FastAPI + WebSocket 的网页版
   - 从同步处理改为异步通信架构
   - 增加了前后端分离设计

2. 文件结构改动：
   - 移除 chess_ui.py（Pygame界面）
   - 新增 web_main.py（FastAPI后端）
   - 新增 templates/chess.html（前端界面）
   - 新增 static/css/chess.css（样式文件）

3. 界面实现改动：
   - 从 Pygame 绘图改为 HTML/CSS 实现
   - 从本地窗口改为浏览器渲染
   - 保持了相似的视觉风格和操作逻辑

4. 功能扩展：
   - 增加了多人在线对战支持
   - 增加了多游戏会话管理
   - 增加了 WebSocket 实时通信

5. 依赖变化：
   - 保留 Python 3.12 基础环境
   - 保留 chess_board.py 核心逻辑
   - 新增 FastAPI, Uvicorn, WebSockets, Jinja2 依赖

6. 游戏逻辑保持：
   - 保持相同的棋子走法规则
   - 保持相同的胜负判定逻辑
   - 保持相同的计时功能

这次改动主要是将游戏从桌面单机版本升级为支持在线对战的网页版本，同时保持了原有的游戏核心功能。

## 总结
虽然两个版本实现了相同的游戏功能，但由于平台和架构的不同，导致了实现方式的显著差异。网页版本提供了更好的多人游戏支持和跨平台能力，而桌面版本则提供了更简单的单机游戏体验。
